name = "towerhouse-apps"
main = "src/index.ts"
compatibility_date = "2024-12-01"

# Static assets served from /public
assets = { directory = "public" }

# Custom domain
routes = [
  { pattern = "app.towerhouse.london", custom_domain = true }
]

[[d1_databases]]
binding = "DB"
database_name = "towerhouse-db"
database_id = "593c5030-9c5e-4b2f-b7fb-eca50b232dbb"
migrations_dir = "migrations"

# Environment variables (secrets set via wrangler secret)
# - ANTHROPIC_API_KEY: Your Anthropic API key
# - VAPID_PUBLIC_KEY: For push notifications
# - VAPID_PRIVATE_KEY: For push notifications

[vars]
APP_URL = "https://app.towerhouse.london"
